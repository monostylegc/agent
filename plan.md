# 랭그래프 기반 논문 검색 및 분석 에이전트 시스템

## 시스템 아키텍처
- LangGraph를 활용한 에이전트 기반 워크플로우
- 각 에이전트는 특정 역할을 담당하며 순차적으로 작업 수행
- 에이전트 간 데이터 전달을 위한 상태 관리 구현

## 에이전트 구성 및 세부 기능

### 1. 플래너 에이전트 (Planner)
- **입력**: 사용자의 초기 질문
- **기능**:
  - 1.1. 사용자의 질문을 분석하여 연구 목적과 범위 명확화
  - 1.2. 질문을 더 구체적인 검색 가능한 형태로 재구성
  - 1.3. 연구 계획 수립 (검색 키워드, 필요한 정보 유형, 분석 방향 등)
- **출력**: 구체화된 질문, 검색 키워드 목록, 연구 계획
- **구현 방법**: LangChain의 ChatOpenAI/ChatAnthropic + 프롬프트 엔지니어링

### 2. 리서처 에이전트 (Researcher)
- **입력**: 플래너가 생성한 검색 키워드와 연구 계획
- **기능**:
  - 2.1. LangChain PubMed Retriever를 사용하여 관련 논문 검색
  - 2.2. 검색 결과 필터링 및 우선순위 지정 (관련성, 인용 수, 발행일 등)
  - 2.3. 선택된 논문의 DOI를 활용해 전문(full text) 사이트 스크래핑
  - 2.4. PDF 다운로드 및 로컬 저장 (논문 ID 기반 파일명 지정)
  - 2.5. 검색 메타데이터 저장 (제목, 저자, 발행일, 저널명, 초록 등)
- **출력**: 논문 PDF 파일들, 메타데이터 JSON 파일
- **구현 방법**: LangChain PubMed Retriever, BeautifulSoup/Playwright, Langchain-docling

### 3. 분석가 에이전트 (Analyzer)
- **입력**: 논문 HTML 파일들, 메타데이터
- **기능**:
  - 3.1. 텍스트 추출 및 전처리
    - 3.1.1. PDF에서 텍스트 추출 및 정제
    - 3.1.2. 섹션별 분리 (서론, 방법, 결과, 논의 등)
  - 3.2. 임베딩 생성
    - 3.2.1. 논문 전체 및 섹션별 임베딩 생성
    - 3.2.2. 벡터 데이터베이스에 저장
  - 3.3. 데이터 추출
    - 3.3.1. 핵심 데이터 포인트 식별 (연구 결과, 통계 수치, 방법론 등)
    - 3.3.2. 표와 그래프에서 데이터 추출
    - 3.3.3. 데이터프레임 생성 및 CSV 저장
  - 3.4. 통계 분석
    - 3.4.1. 추출된 데이터에 대한 기술 통계 분석
    - 3.4.2. 논문 간 비교 분석 (결과, 방법론 등)
    - 3.4.3. 시각화 자료 생성 (그래프, 차트)
- **출력**: 임베딩 벡터, 추출 데이터 CSV, 통계 분석 결과, 시각화 자료
- **구현 방법**: LangChain Document Loaders, OpenAI Embeddings, Pandas, Matplotlib/Plotly, scikit-learn

### 4. 작성가 에이전트 (Writer)
- **입력**: 분석 결과, 추출 데이터, 메타데이터
- **기능**:
  - 4.1. 보고서 구조 설계
  - 4.2. 서론 작성 (연구 배경, 목적)
  - 4.3. 방법론 요약 (검색 및 분석 방법)
  - 4.4. 결과 정리 (주요 발견, 데이터 해석)
  - 4.5. 논의 및 결론 작성 (의미, 한계, 향후 연구 방향)
  - 4.6. 참고문헌 자동 생성
- **출력**: 초안 보고서 (마크다운 또는 HTML 형식)
- **구현 방법**: LangChain의 ChatOpenAI/ChatAnthropic + 프롬프트 엔지니어링, Jinja2 템플릿

### 5. 검토자 에이전트 (Reviewer)
- **입력**: 초안 보고서
- **기능**:
  - 5.1. 내용 정확성 평가 (사실 확인, 논리적 일관성)
  - 5.2. 구조 및 가독성 평가
  - 5.3. 인용 및 참고문헌 검증
  - 5.4. 개선 제안 작성
  - 5.5. 종합 점수 산정 (5점 또는 10점 만점)
- **출력**: 평가 보고서, 개선 제안, 점수
- **구현 방법**: LangChain의 ChatOpenAI/ChatAnthropic + 평가 루브릭 프롬프트

### 6. 편집자 에이전트 (Editor)
- **입력**: 초안 보고서, 평가 보고서, 개선 제안
- **기능**:
  - 6.1. 검토자의 피드백 반영
  - 6.2. 문법 및 맞춤법 교정
  - 6.3. 문체 및 어조 일관성 확보
  - 6.4. 형식 및 레이아웃 최적화
  - 6.5. 최종 보고서 생성 (PDF, HTML, 마크다운 등 다양한 형식)
- **출력**: 최종 보고서
- **구현 방법**: LangChain의 ChatOpenAI/ChatAnthropic, Markdown 변환 라이브러리, PDF 생성 라이브러리

## 시스템 구현 계획
1. 각 에이전트 모듈 개별 구현 및 테스트
2. LangGraph를 활용한 에이전트 간 워크플로우 구성
3. 상태 관리 및 데이터 전달 메커니즘 구현
4. 사용자 인터페이스 개발 (CLI 또는 웹 인터페이스)
5. 전체 시스템 통합 테스트 및 최적화
